(window["webpackJsonptwitch-app"]=window["webpackJsonptwitch-app"]||[]).push([[0],{18:function(e,t,n){e.exports=n(30)},23:function(e,t,n){},24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(15),a=n(0),s=n.n(a),i=n(10),c=n.n(i),l=(n(23),n(3)),o=n(4),u=n(6),h=n(5),p=n(7),m=(n(24),n(1));function f(e){return{type:"SETINITSTREAM",streams:e}}var d={type:"TOGGLECLIPDISPLAY"};var w={type:"SHOWSEARCHRESULT"};var b={type:"BACKFROMSEARCH"};var v=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).returnToList=function(){e.props.dispatch(d)},e.showNext=function(t){e.props.dispatch(function(e,t){if("undefined"!==typeof t().activeStreams.pagination){var n=t().activeStreams.pagination.cursor;fetch("https://api.twitch.tv/helix/streams?after="+n,{headers:{"Client-ID":"wzdibt6ncymm2c9nquwlpkn9hg58i2"}}).then(function(e){return e.json()}).then(function(t){e(f(t))})}else fetch("https://api.twitch.tv/helix/streams",{headers:{"Client-ID":"wzdibt6ncymm2c9nquwlpkn9hg58i2"}}).then(function(e){return e.json()}).then(function(t){e(f(t))})})},e.showPrev=function(t){e.props.dispatch(function(e,t){if("undefined"!==typeof t().activeStreams.pagination){var n=t().activeStreams.pagination.cursor;console.log(t().activeStreams),fetch("https://api.twitch.tv/helix/streams?before="+n,{headers:{"Client-ID":"wzdibt6ncymm2c9nquwlpkn9hg58i2"}}).then(function(e){return e.json()}).then(function(t){e(f(t))})}})},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.props.showList?function(){var t;return t=e.props.list.map(function(t,n){var r=t.thumbnail_url;return r=(r=r.replace("{width}","480")).replace("{height}","270"),s.a.createElement("li",{key:n},s.a.createElement("a",{href:"https://www.twitch.tv/"+t.user_name,className:"stream-link",target:"blank"},s.a.createElement("img",{src:r,alt:"thumbnail"})),s.a.createElement("p",{className:"title"},t.title),s.a.createElement("p",null,t.user_name),s.a.createElement("p",null,t.viewer_count," viewers"),s.a.createElement("button",{className:"nav-button",onClick:function(n){e.props.showClips(t.user_id)}},"Top clips"))}),s.a.createElement("div",null,s.a.createElement("button",{className:"nav-button marg1",onClick:e.showPrev},"Previous"),s.a.createElement("button",{className:"nav-button marg1",onClick:e.showNext},"Next"),s.a.createElement("ul",{className:"streams-list"},t))}():this.props.renderClips?function(){var t=e.props.clips.data.map(function(e,t){return s.a.createElement("li",{key:t},s.a.createElement("iframe",{src:e.embed_url+"&autoplay=false",height:"270",width:"480",scrolling:"no",allowfullscreen:"true"}))});return s.a.createElement("div",null,s.a.createElement("button",{className:"nav-button",onClick:e.returnToList},"Back"),s.a.createElement("ul",{className:"clips-list"},t," "))}():null}}]),t}(a.Component);v.defaultProps={list:[]};var E=Object(m.b)(function(e){return{showList:e.showList,renderClips:e.renderClips,list:e.activeStreams.data,clips:e.clips}})(v),S=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).setSearch=function(e){n.props.dispatch({type:"SETSEARCH",search:e.target.value})},n.runSearch=function(e){e.preventDefault(),n.props.dispatch(function(e,t){fetch("https://api.twitch.tv/helix/streams?user_login="+t().search,{headers:{"Client-ID":"wzdibt6ncymm2c9nquwlpkn9hg58i2"}}).then(function(e){return e.json()}).then(function(n){0!==n.data.length?(fetch("https://api.twitch.tv/helix/games?id="+n.data[0].game_id,{headers:{"Client-ID":"wzdibt6ncymm2c9nquwlpkn9hg58i2"}}).then(function(e){return e.json()}).then(function(t){t.data.length&&e({type:"GAMENAME",gameName:t.data[0].name})}),e(w),e({type:"SETRESULTSTREAM",resultStream:n.data})):fetch("https://api.twitch.tv/helix/users?login="+t().search,{headers:{"Client-ID":"wzdibt6ncymm2c9nquwlpkn9hg58i2"}}).then(function(e){return e.json()}).then(function(t){e(function(e){return{type:"SETPROFILEINFO",resultProfile:e}}(t.data))})})})},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.runSearch,className:"search-form"},s.a.createElement("input",{type:"text",placeholder:"Search",onChange:this.setSearch,value:this.props.search,className:"search-field"}))}}]),t}(a.Component),g=Object(m.b)(function(e){return{search:e.search}})(S),C=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).backFromSearch=function(t){e.props.dispatch(b)},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(0==this.props.showStreamCard)return null;if(0!==this.props.streamInfo.length){var e=this.props.streamInfo[0],t=e.thumbnail_url;return t=(t=t.replace("{width}","640")).replace("{height}","360"),s.a.createElement("div",{className:"result-stream"},s.a.createElement("button",{onClick:this.backFromSearch,className:"nav-button"},"Back"),s.a.createElement("p",{className:"nomt"},e.user_name),s.a.createElement("a",{href:"https://www.twitch.tv/"+e.user_name,target:"blank",className:"result-stream-link"},s.a.createElement("img",{src:t,alt:"thumbnail"})),s.a.createElement("p",null,"Category: ",this.props.game),s.a.createElement("p",{className:"title"},e.title),s.a.createElement("p",null,e.viewer_count," viewers"))}return 0!==this.props.profileInfo.length?s.a.createElement("div",{className:"result-profile"},s.a.createElement("button",{onClick:this.backFromSearch,className:"nav-button"},"Back"),s.a.createElement("a",{href:"https://www.twitch.tv/"+this.props.profileInfo[0].display_name,target:"blank"},s.a.createElement("img",{src:this.props.profileInfo[0].profile_image_url,alt:"profile-pic"}),s.a.createElement("p",null,this.props.profileInfo[0].display_name))):s.a.createElement("div",null,s.a.createElement("button",{onClick:this.backFromSearch,className:"nav-button"},"Back"),s.a.createElement("p",null,"User not found"))}}]),t}(a.Component),O=Object(m.b)(function(e){return{showStreamCard:e.showStreamCard,game:e.gameName,streamInfo:e.resultStream,profileInfo:e.resultProfile}})(C),y=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).showClips=function(t){fetch("https://api.twitch.tv/helix/clips?broadcaster_id="+t+"&first=10",{headers:{"Client-ID":"wzdibt6ncymm2c9nquwlpkn9hg58i2"}}).then(function(e){return e.json()}).then(function(t){e.props.dispatch(function(e){return{type:"SETCLIPS",clips:e}}(t)),e.props.dispatch(d)})},e.state={renderClips:!1},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(function(e,t){fetch("https://api.twitch.tv/helix/streams",{headers:{"Client-ID":"wzdibt6ncymm2c9nquwlpkn9hg58i2"}}).then(function(e){return e.json()}).then(function(t){e(f(t))})})}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(g,null),s.a.createElement(E,{showClips:this.showClips}),s.a.createElement(O,null))}}]),t}(a.Component),j=Object(m.b)()(y),k=n(9),N=n(17);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L={activeStreams:[],showList:!0,renderClips:!1,search:"",gameName:"",resultStream:[],resultProfile:[],showStreamCard:!1,clips:[]};var T=Object(k.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETINITSTREAM":return P({},e,{activeStreams:t.streams});case"TOGGLECLIPDISPLAY":return P({},e,{showList:!e.showList,renderClips:!e.renderClips});case"SETSEARCH":return P({},e,{search:t.search});case"SHOWSEARCHRESULT":return P({},e,{renderClips:!1,showList:!1,showStreamCard:!0});case"SETRESULTSTREAM":return P({},e,{resultStream:t.resultStream});case"BACKFROMSEARCH":return P({},e,{showStreamCard:!1,showList:!0,resultStream:[],resultProfile:[],gameName:"",search:""});case"GAMENAME":return P({},e,{gameName:t.gameName});case"SETPROFILEINFO":return P({},e,{resultProfile:t.resultProfile,resultStream:[],showStreamCard:!0,showList:!1,renderClips:!1});case"SETCLIPS":return P({},e,{clips:t.clips});default:return e}},Object(k.a)(N.a));c.a.render(s.a.createElement(function(){return s.a.createElement(m.a,{store:T},s.a.createElement(j,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.eed344c8.chunk.js.map